{# ATTENTION
office.name = le nom du bureau dans le WS (pluton, Mars, Venus)
office.office.name = type de bureau (open space, bureau, salle de réunion etc)
 #}

<div class="container-fluid">

	{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}

		<div class="row" id="booking-content">
	    	<form method="POST" action="{{ path('becowo_core_booking', {'name': ws.name}) }}" id="booking-form">
			<div class="col-lg-10">

		    	{# ERREUR #}
		    	{% if app.user.email == "" %}
		    		<div id="email-error">
		    			ATTENTION, vous devez renseigner votre email dans <a href="{{ path('fos_user_profile_edit') }}">votre profil</a>, afin de valider la réservation <br>
		    			Votre email nous permettra de confirmer la réservation et de vous envoyer un ticket de paiement.
		    		</div>
		    	{% endif %}
		    	<div id="booking-error"></div>

		    	<div class="row">
		    		<div class="segmented-control" style="width: 800px; color: #20385e" id="filter-office-type">
					  <input type="radio" name="filter-office-type" id="filter-office-type-1" value="Open space" checked onchange="chooseOfficeType()">
					  <input type="radio" name="filter-office-type" id="filter-office-type-2" value="Bureau privé" onchange="chooseOfficeType()">
					  <input type="radio" name="filter-office-type" id="filter-office-type-3" value="Salles de réunions et conférences" onchange="chooseOfficeType()">
					  <input type="radio" name="filter-office-type" id="filter-office-type-4" value="Divers" onchange="chooseOfficeType()">
					  <label for="filter-office-type-1" data-value="Open space">Open space</label>
					  <label for="filter-office-type-2" data-value="Bureau privé">Bureau privé</label>
					  <label for="filter-office-type-3" data-value="Salles de réunions et conférences">Salles de réunions et conférences</label>
					  <label for="filter-office-type-4" data-value="Divers">Divers</label>
					</div>
		    	</div>
		    	<div class="row">
		    		<div class="col-lg-1">
						<span class="booking-badge">1</span>
		    		</div>
		    		<div class="col-lg-11">
						<div class="cc-selector" id="booking-office">
		    				{# OFFICE and PRICES #}
		    				{% for priceandoffice in pricesAndOffices %}
		    					<input id="{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}" type="radio" name="office" value="{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}" onchange="bookOffice()" class="required" />
		    					<label class="drinkcard-cc" for="{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}" id="label-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}">
		    					{% if priceandoffice.WorkspaceHasOffice.UrlProfilePicture != '' %}
				        			<img src="{{ asset('images/Workspaces/') }}{{ws.name}}/{{priceandoffice.WorkspaceHasOffice.UrlProfilePicture}}" alt="{{priceandoffice.WorkspaceHasOffice.office.name}}" title="{{priceandoffice.WorkspaceHasOffice.office.name}}" width="190px">
				        		{% else %}
				        			<img src="{{ asset('images/icons/offices/BsurN/') }}{{priceandoffice.WorkspaceHasOffice.office.name}}.png" alt="{{priceandoffice.WorkspaceHasOffice.office.name}}" title="{{priceandoffice.WorkspaceHasOffice.office.name}}">
				        		{% endif %}
				        			<div class="drinkcard-cc-title">{{priceandoffice.workspaceHasOffice.name}}</div>
				        	 		<div class="drinkcard-cc-price" id="pricePerOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}">{# le prix va s'afficher ici via JS #}</div>
					        	</label>
					        	<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-deskQty" style="display: none">{{priceandoffice.workspaceHasOffice.deskQty}}</div>
					        	{# Récup les prix par bureau #}
					        	<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-priceHeure" style="display: none">{{priceandoffice.priceHour}}</div>
				        		<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-price1/2 journée" style="display: none">{{priceandoffice.priceHalfDay}}</div>
				        		<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-priceJournée" style="display: none">{{priceandoffice.priceDay}}</div>
				        		<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-priceSemaine" style="display: none">{{priceandoffice.priceWeek}}</div>
				        		<div id="SelectedOffice-{{priceandoffice.workspaceHasOffice.name}}*{{priceandoffice.workspaceHasOffice.office.name}}-priceMois" style="display: none">{{priceandoffice.priceMonth}}</div>

		    				{% endfor %}
					    </div>
					    {# Attention, ne pas ajouter d'input dans la div booking-office car dans main.js on boucle sur les input #}
		    		</div>
		    	</div>
		    				        	
				<div class="row">
					<div class="col-lg-1">
						<span class="booking-badge">2</span>
					</div>
					<div class="col-lg-5">
						{# DUREE #}
						    <div class="segmented-control" style="width: 400px; color: #20385e" id="booking-duration">
							  <input type="radio" name="booking-duration" id="booking-duration-1" value="Heure" checked onchange="chooseDuration()">
							  <input type="radio" name="booking-duration" id="booking-duration-2" value="1/2 journée" onchange="chooseDuration()">
							  <input type="radio" name="booking-duration" id="booking-duration-3" value="Journée" onchange="chooseDuration()">
							  <input type="radio" name="booking-duration" id="booking-duration-4" value="Semaine" onchange="chooseDuration()">
							  <input type="radio" name="booking-duration" id="booking-duration-5" value="Mois" onchange="chooseDuration()">
							  <label for="booking-duration-1" data-value="Heure">Heure</label>
							  <label for="booking-duration-2" data-value="1/2 journée">1/2 journée</label>
							  <label for="booking-duration-3" data-value="Journée">Journée</label>
							  <label for="booking-duration-4" data-value="Semaine">Semaine</label>
							  <label for="booking-duration-5" data-value="Mois">Mois</label>
							</div>
					</div>
					<div class="col-lg-1">
						<span class="booking-badge">3</span>
					</div>
					<div class="col-lg-5">
						{# CALENDRIER #}
							<div id="isOpenSaturday" style="display:none">{{times[0].isOpenSaturday}}</div><div id="isOpenSunday" style="display:none">{{times[0].isOpenSunday}}</div>
							<div id="closedDates" style="display:none">
								{% for d in closedDates %}{{- d.closedDate.date|date("d/m/Y") -}},{% endfor %}
							</div>
							<input type="text" name="booking-calendar" id="booking-calendar" />
							<span id="calendar-error"></span>
					</div>	
				</div>
						
				<div class="row">
					<div class="col-lg-1">
						<span class="booking-badge">4</span>
					</div>
					<div class="col-lg-5">
						{# HORAIRE #}
							<span id="calendar-time">
							    <b id="calendar-time-min">{{times[0].openHour|date("H:i")}}</b>
							    <span class="slideTime">
							    	<input id="booking-time-slider" type="text" data-slider-handle="custom" name="booking-time-slider" />
							    </span>
							    <b id="calendar-time-max">{{times[0].closeHour|date("H:i")}}</b>
							    <br>
							</span>
						{# 1/2 JOURNEE #}
							<span id="calendar-halftime">	
							    <div class="segmented-control" style="width: 300px; color: #20385e" id="booking-duration-day">
								  <input type="radio" name="booking-duration-day" id="booking-duration-day-1" checked onchange="chooseDurationDay()" value="Matin">
								  <input type="radio" name="booking-duration-day" id="booking-duration-day-2" onchange="chooseDurationDay()" value="Après-midi">
								  <label for="booking-duration-day-1" data-value="Matin">Matin</label>
								  <label for="booking-duration-day-2" data-value="Après-midi">Après-midi</label>
								</div>
							    <br>
							</span>
					</div>
					<div class="col-lg-1">
						<span class="booking-badge">5</span>
					</div>
					<div class="col-lg-5">
						
						    {# TO DO : min et max en fonction de la salle sélectionnée et des places dispos #}
					    {# Nb PEOPLE #}
						    <b>1</b>
						    <span class="slidePeople">
						    	<input id="booking-people" type="text" data-slider-handle="custom" data-slider-min="1" data-slider-max="10" data-slider-value="1" name="booking-people"/>
						    </span>
						    <b id="booking-people-max">10</b>
					</div>
				</div>

	  			* Nos prix sont exprimés en TTC
			</div>

			<div class="col-lg-2 well">
				Détails de la réservation : <br>
				{# <div id="booking-selected-office" style="display: none"></div> #}
				<span id="booking-recap-office-name">{{ws.name}}</span><br>
				<span id="booking-recap-office-type"></span><span id="booking-recap-office"></span><br>
				<span id="booking-recap-duration"></span> <span id="booking-recap-duration-txt"></span><br>
				<span id="booking-recap-date"></span><span id="booking-recap-date-calculated" style="display:none"></span><br>
				<span id="booking-recap-time"></span><span id="booking-recap-time-calculated" style="display:none"></span><br>
				<span id="booking-recap-people"></span><span id="booking-recap-people-txt"></span><br>
				<span id="booking-recap-price"></span><span id="booking-recap-price-txt"></span><br>
				{# J'ai besoin que le price soit dans un input pour le récupérer depuis le controller #}
				<input id="booking-price-incl-tax" type="number" step="any" name="booking-price-incl-tax" value="" hidden="true">

				<input type="submit" value="Valider" id="booking-valider"> 
				
			</div>
			</form>
		</div>


	{% else %}
		<p>Pour réserver, vous devez être <a href="{{ path('fos_user_security_login') }}">connecté</a></p>
	{% endif %}
</div>
