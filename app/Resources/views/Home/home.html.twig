{% extends "layout.html.twig" %}

{% block title %}
  {{ parent() }} - Accueil
{% endblock %}

{% block stylesheets %}
{% endblock stylesheets %}

{% block body %}


{% include 'Home/home-image.html.twig' %} 

{% if is_mobile() %}
	{{ render(controller('BecowoCoreBundle:Home:mobile')) }}
{% else %}
	{% include 'Home/map-and-list.html.twig' %} 
{% endif %}

<div class="container-fluid">

<div class="row text-center">
	<br><br>
	{% include 'CommonViews/video.html.twig' %} 
	<br><br>
</div>


{% include 'Home/blog-and-insta.html.twig' %} 


{% include 'CommonViews/declarerEspace.html.twig' %} 


</div>



{% endblock body %}

{% block javascripts %}

<script>
	// $("#PriceSlider").slider({});
	// $("#PriceSlider").on("slide", function(slideEvt) {
	// 	var val = String(slideEvt.value);
	// 	$("#PriceSliderMin").text(val.substring(0, 2));
	// 	$("#PriceSliderMax").text(val.substring(3));
	// });


	$(function() {
		var styles = [{"featureType":"landscape.natural","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#e0efef"}]},{"featureType":"poi","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"hue":"#1900ff"},{"color":"#c0e8e8"}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":100},{"visibility":"simplified"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"visibility":"on"},{"lightness":700}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#7dcdcd"}]}];

		// dégeulasse mais je n'arrive pas à faire mieux
		var url = "{{site_url}}";
		if(url.indexOf('localhost') !== -1)
		{
			// var infowindowTemplatePath = "{{ asset('js/StoreLocator/infowindow-description-LOCAL.html') }}";
			var listTemplatePath = "{{ asset('js/StoreLocator/location-list-description-LOCAL.html') }}";
		}else if(url.indexOf('demo') !== -1){
			// var infowindowTemplatePath = "{{ asset('js/StoreLocator/infowindow-description-DEMO.html') }}";
			var listTemplatePath = "{{ asset('js/StoreLocator/location-list-description-DEMO.html') }}";
		}else{
			// var infowindowTemplatePath = "{{ asset('js/StoreLocator/infowindow-description-PROD.html') }}";
			var listTemplatePath = "{{ asset('js/StoreLocator/location-list-description-PROD.html') }}";
		}

		$('#bh-sl-map-container').storeLocator({
			'mapSettings' : {
		        zoom : 12,
		        mapTypeId: google.maps.MapTypeId.ROADMAP,
		        styles: styles,
		        scrollwheel : false,
		      },
			// 'maxDistance': false,	// active menu déroulant de recherche par distance max
			'distanceAlert' : 100000,
			'storeLimit' : 100000,
			'exclusiveFiltering' : true,
			'geocodeID' : 'findMe',
			'taxonomyFilters' : {
				'region' : 'region-filters-container',
				'category' : 'category-filters-container1'
				// 'features' : 'category-filters-container2',
				// 'city' : 'city-filter',
				// 'postal': 'postal-filter'
			},
			'visibleMarkersList' : true, //active refresh de la list selon zoom de la carte
			'infowindowTemplatePath'   : '',
			'listTemplatePath'         : listTemplatePath,
    		'lengthUnit'	: 'km',
    		'fullMapStart' : true,	// show map by default
    		'nameSearch': true,
    		'dataType' : 'xml',
    		/*'markerCluster' : {
    			// https://googlemaps.github.io/js-marker-clusterer/docs/reference.html
    			//'maxZoom' : 12,
    			'zoomOnClick' : true,
    			'minimumClusterSize' : 2,
    			'style': {
    				// ne marche pas
    				'textColor' : 'white'
    			}
    		},*/
    		'dataLocation' : "{{ asset('js/StoreLocator/locations.xml') }}",
    		'catMarkers' : {'Coworking' : ["{{ asset('images/icons/marker-red.png') }}", 32, 32], 'Centre d\'affaires' : ["{{ asset('images/icons/marker-blue.png') }}", 32, 32], 'Creche' : ["{{ asset('images/icons/creche.png') }}", 32, 32], 'Salle de musculation' : ["{{ asset('images/icons/gym.png') }}", 32, 32]}, 
    		// 'markerImg' : "{{ asset('images/icons/marker.png') }}"
		});
	});
</script>


{% endblock javascripts %}
	

